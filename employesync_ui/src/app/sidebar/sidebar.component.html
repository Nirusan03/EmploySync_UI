<div class="h-screen bg-white shadow-lg p-4 flex flex-col transition-all duration-300"
     [ngClass]="{ 'w-64': !isCollapsed, 'w-20': isCollapsed }">

  <!-- Sidebar Header with Toggle Button -->
  <div class="flex justify-between items-center mb-4">
    <div class="flex items-center space-x-2">
      <mat-icon class="cursor-pointer text-gray-500">apps</mat-icon> 
      <span class="font-bold text-blue-900" [ngClass]="{ 'hidden': isCollapsed }">{{ organizationName }}</span>
    </div>
    
    <button class="toggle-btn" (click)="toggleSidebar()">
      <mat-icon>{{ isCollapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
    </button>
  </div>

  <!-- Navigation Links -->
  <ul class="space-y-1">
    <li class="flex items-center space-x-2 menu-item">
      <mat-icon>description</mat-icon>
      <a href="#" [ngClass]="{ 'hidden': isCollapsed }">Proposals</a>
    </li>
    <li class="flex items-center space-x-2 menu-item">
      <mat-icon>group</mat-icon>
      <a href="#" [ngClass]="{ 'hidden': isCollapsed }">Team</a>
    </li>
    <li class="flex items-center space-x-2 menu-item" (click)="navigateTo('/company')">
      <mat-icon>business</mat-icon>
      <span [ngClass]="{ 'hidden': isCollapsed }">Company</span>
    </li>
  </ul>

  <hr class="my-3 border-gray-300">

  <ul class="space-y-1">
    <li class="flex items-center space-x-2 menu-item">
      <mat-icon>dashboard</mat-icon>
      <a href="#" [ngClass]="{ 'hidden': isCollapsed }">My Space</a>
    </li>
    <li class="flex items-center space-x-2 menu-item" (click)="navigateTo('/requests')">
      <mat-icon>mail</mat-icon>
      <span [ngClass]="{ 'hidden': isCollapsed }">Requests</span>
    </li>    
    <li class="flex items-center space-x-2 menu-item" (click)="navigateTo('/post-job/step-1')">
      <mat-icon>post_add</mat-icon>
      <span [ngClass]="{ 'hidden': isCollapsed }">Post Jobs</span>
    </li>
  </ul>

  <div class="mt-auto">
    <ul class="space-y-1">
      <li class="flex items-center space-x-2 menu-item">
        <mat-icon>link</mat-icon>
        <a href="#" [ngClass]="{ 'hidden': isCollapsed }">My Network</a>
      </li>
      <li class="flex items-center space-x-2 menu-item">
        <mat-icon>notifications</mat-icon>
        <a href="#" [ngClass]="{ 'hidden': isCollapsed }">Notifications</a>
      </li>
    </ul>

    <div class="mt-6"></div>

    <div class="search-container w-full" [ngClass]="{ 'hidden': isCollapsed }">
      <mat-form-field class="w-full">
        <mat-label>Search</mat-label>
        <input matInput type="text">
      </mat-form-field>
    </div>
  </div>

  <!-- User Profile Section -->
  <div class="profile-container flex items-center justify-between">
    <div class="flex items-center space-x-2">
      <img [src]="userProfileImage" alt="User Profile" class="profile-img">
      <span class="ml-2" [ngClass]="{ 'hidden': isCollapsed }">{{ userName }}</span>
    </div>
    
    <button mat-icon-button [matMenuTriggerFor]="profileMenu" *ngIf="!isCollapsed">
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #profileMenu="matMenu">
      <button mat-menu-item (click)="selectProfileImage()">
        <mat-icon>photo_camera</mat-icon> Change Profile Picture
      </button>
    </mat-menu>
  </div>
</div>
